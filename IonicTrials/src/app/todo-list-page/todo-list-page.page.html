<body>
  <ion-app>
    <ion-menu side="start" menuId="menu" content-id="main-content">
      <ion-header>
        <ion-toolbar translucent>
          <ion-title>Ionic Trials Todo</ion-title>
        </ion-toolbar>
      </ion-header>
      <ion-content>
        <ion-list>
          <ion-item (click)="openMyDay()" [ngStyle]="selected==1?{'color': 'blue'} : {'color': 'grey'}">
            <ion-icon name="sunny-outline" slot="start" [ngStyle]="selected==1?{'color': 'blue'} : {'color': 'grey'}"></ion-icon>
            <ion-label>My Day</ion-label>
          </ion-item>
          <ion-item (click)="openImportant()" [ngStyle]="selected==2?{'color': 'magenta'} : {'color': 'grey'}">
            <ion-icon name="star-outline" slot="start" [ngStyle]="selected==2?{'color': 'magenta'} : {'color': 'grey'}"></ion-icon>
            <ion-label>Important</ion-label>
          </ion-item>
          <ion-item (click)="openMyPlanned()" [ngStyle]="selected==3?{'color': 'orange'} : {'color': 'grey'}">
            <ion-icon name="planet-outline" slot="start" [ngStyle]="selected==3?{'color': 'orange'} : {'color': 'grey'}"></ion-icon>
            <ion-label>Planned</ion-label>
          </ion-item>
          <ion-item (click)="openAssigned()" [ngStyle]="selected==4?{'color': 'green'} : {'color': 'grey'}">
            <ion-icon name="person-outline" slot="start" [ngStyle]="selected==4?{'color': 'green'} : {'color': 'grey'}"></ion-icon>
            <ion-label>Assigned To You</ion-label>
          </ion-item>
          <ion-item (click)="openTasks()" [ngStyle]="selected==5?{'color': 'purple'} : {'color': 'grey'}">
            <ion-icon name="albums-outline" slot="start" [ngStyle]="selected==5?{'color': 'purple'} : {'color': 'grey'}"></ion-icon>
            <ion-label>Tasks</ion-label>
          </ion-item>
          <li *ngFor="let todoType of todoTypesArray let i = index">
            <ion-item (click)="openCustomList(todoType)" [ngStyle]="selected==6+i?{'color': 'blue'} : {'color': 'grey'}">
              <ion-icon name="list-outline" slot="start" [ngStyle]="selected==6+i?{'color': 'blue'} : {'color': 'grey'}"></ion-icon>
              <ion-label>{{todoType.name}}</ion-label>
            </ion-item>
          </li>
          <ion-item (click)="createNewList()" [ngStyle]="{'color': 'black'}">
            <ion-icon name="add" slot="start" [ngStyle]="{'color': 'black'}"></ion-icon>
            <ion-label>Create New list</ion-label>
          </ion-item>
        </ion-list>
      </ion-content>
    </ion-menu>

    <div class="ion-page" id="main-content">
      <ion-header>
        <ion-toolbar>
          <ion-buttons slot="start">
            <ion-menu-button></ion-menu-button>
          </ion-buttons>
          <ion-title>{{title}}</ion-title>
        </ion-toolbar>
      </ion-header>
      <ion-content class="ion-padding">
        <div class="list-wrapper pt-1">
          <ul class="d-flex flex-column-reverse todo-list todo-list-custom" overflow="hidden" *ngFor="let todo of todoArray; let i = index">
            <li *ngIf="!todo.completed"  [ngClass]="{'completed' : todo.completed }">
              <div class="form-check form-check-flat col-md-12">
                <p><label class="form-check-label">
                  <input class=" checkbox" [checked]="todo.completed" type="checkbox" (change)="changeTodoStatus($event, i)">
                  {{todo.task}}
                  <i class="input-helper"></i>
                </label></p>
                <label [ngStyle]="{'color': 'green'}" *ngIf="todo.dueDate != null">{{todo.dueDate | date: 'EEEE, MMM dd'}}</label>              
              </div>
              <button class="mr-2" (click)="impTodoItem(todo)" clear text-center>
                <ion-icon name="star-outline" *ngIf="!todo.important"></ion-icon>
                <ion-icon name="star" *ngIf="todo.important"></ion-icon>
             </button>
              <!-- <ion-icon name="star-outline" (click)="removeTodoItem(todo)" padding-left="20px"></ion-icon> -->
              <!-- <i class="remove ti-close" (click)="onrightClick(todo)"></i> -->

              <!-- <input *ngIf="false" id="myCalendar" type="date" [ngModel] ="dt | date:'yyyy-MM-dd'" #datePicker> -->
              <!-- <input *ngIf="false" type="date" id="start" name="trip-start"> -->

              <ionic-context-menu icon="ellipsis-vertical-outline">
                <ionic-context-menu-item icon="star-outline" (click)="impTodoItem(todo)">{{impText}}</ionic-context-menu-item>
                <ionic-context-menu-item icon="checkmark-done-outline" (click)="changeStatus(todo, true)">Mark as Completed</ionic-context-menu-item>
                <ionic-context-menu-item icon="today-outline" (click)="setDueDate(todo, 'today')">Due Today</ionic-context-menu-item>
                <ionic-context-menu-item icon="today-outline" (click)="setDueDate(todo, 'tomorrow')">Due Tomorrow</ionic-context-menu-item>
                <ionic-context-menu-item icon="calendar-outline" (click)="selectCalendar(todo)">Pick Due Date</ionic-context-menu-item>
                <ionic-context-menu-item icon="trash-outline" (click)="removeTodoItem(todo)">Remove Task</ionic-context-menu-item>
                <!-- <ionic-context-menu icon="ellipsis-vertical-outline">
                  <ionic-context-menu-item icon="star-outline" (click)="impTodoItem(todo)">Add to new List</ionic-context-menu-item>        
                  <ionic-context-menu-item icon="star-outline" (click)="impTodoItem(todo)">Add to new List 2</ionic-context-menu-item>
                </ionic-context-menu> -->
              </ionic-context-menu>
            </li>
          </ul>
        </div>

        <div class="faq-section mt-4">
          <ngb-accordion class="accordion" [closeOthers]="true" activeIds="panel-7">
            <ngb-panel id="panel-7" title="Completed Tasks">
              <ng-template ngbPanelContent>
                <div class="list-wrapper pt-1">
                  <ul class="d-flex flex-column-reverse todo-list todo-list-custom" *ngFor="let todo of todoArray; let i = index">
                    <li *ngIf="todo.completed" [ngClass]="{'completed' : todo.completed }">
                      <!-- [ngClass]="{'completed' : todo.completed }" -->
                      <div class="form-check form-check-flat col-md-12">
                        <p><label class="form-check-label">
                          <input class="checkbox" [checked]="todo.completed" type="checkbox" (change)="changeTodoStatus($event, i)">
                          {{todo.task}}
                          <i class="input-helper"></i>
                        </label></p>
                        <label [ngStyle]="{'color': 'green'}" *ngIf="todo.dueDate != null">{{todo.dueDate | date: 'EEEE, MMM dd'}}</label> 
                      </div>
                      <button class="mr-2" (click)="impTodoItem(todo)" clear text-center>
                        <ion-icon name="star-outline" *ngIf="!todo.important"></ion-icon>
                        <ion-icon name="star" *ngIf="todo.important"></ion-icon>
                     </button>
                      <!-- <ion-icon name="star-outline" (click)="removeTodoItem(todo)" padding-left="20px"></ion-icon> -->
                      <!-- <i class="remove ti-close" (click)="onrightClick(todo)"></i> -->
        
                      <ionic-context-menu icon="ellipsis-vertical-outline">
                        <ionic-context-menu-item icon="star-outline" (click)="impTodoItem(todo)">{{impText}}</ionic-context-menu-item>
                        <ionic-context-menu-item icon="checkmark-done-outline" (click)="changeStatus(todo, false)">Mark as Not Completed</ionic-context-menu-item>
                        <ionic-context-menu-item icon="today-outline" (click)="setDueDate(todo, 'today')">Due Today</ionic-context-menu-item>
                        <ionic-context-menu-item icon="today-outline" (click)="setDueDate(todo, 'tomorrow')">Due Tomorrow</ionic-context-menu-item>
                        <ionic-context-menu-item icon="calendar-outline" (click)="selectCalendar(todo)">Pick Due Date</ionic-context-menu-item>
                        <ionic-context-menu-item icon="trash-outline" (click)="removeTodoItem(todo)">Remove Task</ionic-context-menu-item>
                        <!-- <ionic-context-menu icon="ellipsis-vertical-outline">
                          ng-click=""
                          <ionic-context-menu-item icon="star-outline" (click)="impTodoItem(todo)">Add to new List</ionic-context-menu-item>        
                          <ionic-context-menu-item icon="star-outline" (click)="impTodoItem(todo)">Add to new List 2</ionic-context-menu-item>
                        </ionic-context-menu> -->
                      </ionic-context-menu>
                    </li>
                  </ul>
                </div>
              </ng-template>
            </ngb-panel>
          </ngb-accordion>
        </div>
      </ion-content>

      <div class="row">
      <div class="text-center col-md-12 ml-2 border">
      <form class="add-items d-flex mb-2 mt-2" [formGroup]="form" (ngSubmit)="addTodo()">
        <!-- <div class="col-12 grid-margin stretch-card" padding-left="20px">
          <div class="card">
                  <input type="text" class="form-control" formControlName="todoitem" id="exampleInputName1" placeholder=" Add a Task">
                  <button class="add btn btn-icon text-primary todo-list-add-btn bg-transparent" type="submit" [disabled]="form.invalid"><i class="ti-location-arrow"></i></button>
          </div>
        </div> -->

        <input type="text" class="form-control todo-list-input" formControlName="todoitem" placeholder="Add a task">
        <button class="add btn btn-icon text-primary todo-list-add-btn bg-transparent mr-2" type="submit" [disabled]="form.invalid"><i class="ti-location-arrow"></i></button>
      </form>
      </div>
    </div>
    </div>
  </ion-app>

  <!-- <script>
    async function openMenu() {
      await menuController.open();
    }
  </script> -->
</body>